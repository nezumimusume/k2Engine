<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="generator" content="Doxygen 1.8.17"/>
    <meta name="addsearch-custom-field" content="product=realtime"/>
    <meta name="addsearch-custom-field" content="version=current"/>
    <meta name="addsearch-category" content="realtime/current" />
    <title>Photon C++ Client API: Fragmentation and Channels</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="text/xml" title="RSS" href="http://feeds.feedburner.com/exitgamesphoton">
    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://feeds.feedburner.com/exitgamesphoton">
    <!-- For IE: -->
    <link rel="shortcut icon" href="/favicon.ico" type="image/vnd.microsoft.icon">
    <!-- For Browsers, Android: -->
    <link rel="icon" sizes="192x192" href="/touch-icon-192x192.png">
    <link rel="icon" sizes="57x57" href="/apple-touch-icon-precomposed.png">
    <!-- For iPhone 6 Plus: -->
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/apple-touch-icon-180x180-precomposed.png">
    <!-- For iPad running iOS = 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/apple-touch-icon-152x152-precomposed.png">
    <!-- For iPhone running iOS = 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/apple-touch-icon-120x120-precomposed.png">
    <!-- For the iPad mini and the first- and second-generation iPad on iOS = 7: -->
    <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/apple-touch-icon-76x76-precomposed.png">
    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-precomposed.png">
    <style>
        @charset "UTF-8";
        @import url(//fonts.googleapis.com/css?family=Open+Sans:300,600,700);
        html,
        body {
            height: 100.1%;
        }
        body {
            font-family: "Open Sans", Verdana, Helvetica, Arial, sans-serif;
            line-height: 1.51803398875;
                -webkit-font-smoothing: antialiased;
                -webkit-text-size-adjust: 100%;
            text-rendering: optimizeLegibility;
        }
        #projectname { font-size: 200%; }
        #projectname img {
            vertical-align: sub;
            margin-right: .2em;
        }
    </style>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
    <table cellspacing="0" cellpadding="0" style="width: 100%;">
        <tbody>
            <tr style="height: 56px;">
                <td id="projectalign" style="padding-left: 0.5em;">
                    <div id="projectname">
                        <img alt="" src="logo.png">
                        Photon C++ Client API
                    &#160;<span id="projectnumber">5.0.0.0</span>
                    </div>
                </td>
                <td style="width: 50%;"><gcse:search linktarget="_parent"></gcse:search></td>
            </tr>
        </tbody>
    </table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Overview</a></li><li class="navelem"><a class="el" href="a12676.html">Photon-cpp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Fragmentation and Channels </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="FragmentationAndChannels_Fragmentation"></a>
Fragmentation</h1>
<p>Bigger chunks of data (more than about 1kB) are not fitting into a single packet, so they are fragmented and reassembled automatically. Depending on the data size, this takes up multiple packages.</p>
<p>Be aware that this might stall other commands. Call <a class="el" href="a11658.html#ac66e8bb0fdc525c5e250092c35343a2d">service()</a> or <a class="el" href="a11658.html#a5f8607574c36273d920ff3c859d65b5b">sendOutgoingCommands()</a> more often than absolutely necessary. You can also check the debug output for <b>"WARNING! There are x outgoing messages waiting in the local sendQueue !"</b>, which is triggered, if a sendqueue contains an unusual big amount of elements and means, that you probably do not call <a class="el" href="a11658.html#ac66e8bb0fdc525c5e250092c35343a2d">service()</a> or <a class="el" href="a11658.html#a5f8607574c36273d920ff3c859d65b5b">sendOutgoingCommands()</a> often enough to let Photon send all the packets out, which you are creating by triggering operations.</p>
<h1><a class="anchor" id="FragmentationAndChannels_Sequencing"></a>
Sequencing</h1>
<p>The sequencing of the protocol makes sure that any receiving client will dispatch your actions in the order, in which you have sent them. Unreliable data is considered replaceable and can be lost. Reliable events and operations will be repeated several times if needed, but they will all be dispatched in order without gaps. Unreliable actions are also related to the last reliable action in the same channel and do not get dispatched before that reliable data has been dispatched first. This can be useful, if the actions are related to each other.</p>
<p>Example: Your FPS sends out unreliable movement updates and reliable chat messages. A lost package with movement updates would be left out as the next movement update is coming fast. On the receiving end, this would maybe show as a small jump. If a package with a chat message is lost, it would be resent and would introduce lag, even to all movement updates, created after that chat-message. In this case, the data is unrelated and should be put into different channels, to avoid that a needed resent of a chat message introduces lag into the movement updates.</p>
<h1><a class="anchor" id="FragmentationAndChannels_Channels"></a>
Channels</h1>
<p>Photon is supporting "channels". This allows you to separate information into multiple channels, each being sequenced independently. This means, that operations and events of one channel will not be stalled because events of another channel are not available yet.</p>
<p>By default a PhotonPeer has an amount of <a class="el" href="a11658.html#a1b8dacd122e7d5ebaeee1f309a2858b8">getChannelCountUserChannels()</a> user channels and channel zero is the default channel, which will be used, when not explicitly specifying a channel. Operations join and leave are always sent in channel zero. There is a "system" channel 255 used internally for connect and disconnect messages. This channel is ignored for the user channel count.</p>
<p>Channels are prioritized: Data, to be send on the lowest channel number is put into an UDP package first. Data, which will be sent through a channel with a higher number might be sent later when an UDP package is already full.</p>
<p>Example: The chat messages could be sent in channel one, while movement is sent in channel zero. They are not related to the movement and if a chat message is delayed, it will no longer affect movement in channel zero. Also, channel zero has higher priority and is more likely to be sent immediately (in case packages get filled up). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
<footer style="border-top: 1px solid #444; margin-top: 1em; padding: 1em;">
    <div style="float: left;">
        &copy;&nbsp;<a href="https://www.photonengine.com/"> Exit Games &reg;</a>, all rights reserved.
    </div>
    <div style="float: right;">
        <a href="http://doc.photonengine.com/">Photon Documentation</a> |
        <a href="http://www.photonengine.com/en/contact">Contact</a> |
        <a href="https://www.photonengine.com/en/account/terms">Terms</a>
    <div>
    <b style="clear: both;"></b>
</footer>
<script>
  (function() {
    var cx = '015653142792304683059:ykdoyzkcyu4';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
</body>
</html>